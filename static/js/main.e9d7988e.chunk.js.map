{"version":3,"sources":["Footer.js","GraphLayout.js","App.js","index.js"],"names":["Footer","url","mail","style","width","className","color","paddingLeft","marginBottom","fontSize","href","target","Nav","Item","Link","clamp","value","min","max","enterLink","selection","scale","attr","d","coappearances","on","i","all","handleLinkMouseOver","select","handleLinkMouseOut","enterNode","r","simulation","clipPositions","append","call","drag","dragStart","dragOn","dragEnd","handleTooltipMouseEnter","handleTooltipMouseOut","getSvgRect","node","getBoundingClientRect","top","left","index","x","y","text","name","remove","event","active","alphaTarget","restart","fx","fy","updateLinks","source","updateNodes","tooltip","data","filter","updateGraph","selectAll","GraphLayout","nodes","links","height","ref","useRef","useMemo","forceSimulation","force","forceLink","forceManyBody","forceCollide","forceCenter","useEffect","current","console","log","svg","linksExtent","extent","map","scaleLinkWidth","scaleLinear","domain","range","scaleLinkDistance","distance","join","enter","alpha","App","useState","setNodes","Container","Button","onClick","concat","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e9d7988e.chunk.js","sourcesContent":["import React from 'react';\nimport { Nav } from 'react-bootstrap';\n\nexport const Footer = ({ url }) => {\n  const mail = 'renato.hermoza@pucp.edu.pe';\n  const social = 'renato145';\n\n  return (\n    <footer style={{ width: '100%' }} className=\"mt-5\">\n      <p style={{ color: '#6c757d', paddingLeft: '1rem', marginBottom: '0rem', fontSize: '0.9rem' }}>\n        Made by: Renato Hermoza, check the{' '}\n        <a href={`https://github.com/renato145/${url}`} target=\"_black\">\n          source code\n        </a>\n        .\n      </p>\n      <hr className=\"mt-2\" />\n      <Nav className=\"justify-content-center\">\n        <Nav.Item>\n          <Nav.Link href={`mailto:${mail}`}>{mail}</Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link href={`https://twitter.com/${social}`} target=\"_black\">\n            Twitter\n          </Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link href={`https://github.com/${social}`} target=\"_black\">\n            GitHub\n          </Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link href={`https://${social}.github.io`} target=\"_black\">\n            Blog\n          </Nav.Link>\n        </Nav.Item>\n      </Nav>\n    </footer>\n  );\n};\n","import React, { useRef, useEffect, useMemo } from 'react';\nimport {\n  forceSimulation,\n  forceLink,\n  forceManyBody,\n  forceCenter,\n  select,\n  drag,\n  event,\n  scaleLinear,\n  extent,\n  forceCollide,\n} from 'd3';\nimport './GraphLayout.css';\n\nexport const clamp = (value, min, max) =>\n  value >= max ? max : value <= min ? min : value;\n\nconst enterLink = (selection, scale) => {\n  selection\n    .attr('class', 'link')\n    .attr('stroke-width', (d) => scale(d.coappearances))\n    .on('mouseover', (d, i, all) =>\n      handleLinkMouseOver(d, select(all[i]), scale)\n    )\n    .on('mouseout', (d, i, all) =>\n      handleLinkMouseOut(d, select(all[i]), scale)\n    );\n};\n\nfunction handleLinkMouseOver(d, selection, scale) {\n  selection.attr('stroke-width', 2 * scale(d.coappearances));\n}\n\nfunction handleLinkMouseOut(d, selection, scale) {\n  selection.attr('stroke-width', scale(d.coappearances));\n}\n\nconst enterNode = (selection, r, simulation, clipPositions) => {\n  selection.append('circle').attr('r', r);\n\n  selection\n    .attr('class', 'node')\n    .call(\n      drag()\n        .on('start', (d) => dragStart(d, simulation))\n        .on('drag', (d) => dragOn(d, clipPositions))\n        .on('end', (d) => dragEnd(d, simulation))\n    )\n    .on('mouseenter', handleTooltipMouseEnter)\n    .on('mouseout', handleTooltipMouseOut);\n};\n\nconst getSvgRect = () =>\n  select('.svg-container svg').node().getBoundingClientRect();\n\nfunction handleTooltipMouseEnter(d) {\n  const { top, left } = getSvgRect();\n  select('.svg-container')\n    .append('div')\n    .attr('class', 'node-tooltip')\n    .attr('index', d.index)\n    .style('left', `${d.x + left}px`)\n    .style('top', `${d.y + top}px`)\n    .append('text')\n    .text(d.name);\n}\n\nfunction handleTooltipMouseOut() {\n  select('.node-tooltip').remove();\n}\n\nconst dragStart = (d, simulation) => {\n  if (!event.active) simulation.alphaTarget(0.3).restart();\n  d.fx = d.x;\n  d.fy = d.y;\n};\n\nconst dragOn = (d, clipPositions) => {\n  const [x, y] = clipPositions(event.x, event.y);\n  d.fx = x;\n  d.fy = y;\n};\n\nconst dragEnd = (d, simulation) => {\n  if (!event.active) simulation.alphaTarget(0);\n  d.fx = null;\n  d.fy = null;\n};\n\nconst updateLinks = (selection) => {\n  selection\n    .attr('x1', (d) => d.source.x)\n    .attr('y1', (d) => d.source.y)\n    .attr('x2', (d) => d.target.x)\n    .attr('y2', (d) => d.target.y);\n};\n\nconst updateNodes = (selection) => {\n  selection.attr('transform', (d) => `translate(${d.x}, ${d.y})`);\n  const tooltip = select('.node-tooltip');\n  if (tooltip.node()) {\n    const index = +tooltip.attr('index');\n    const { top, left } = getSvgRect();\n    const { x, y } = selection.data().filter((d) => d.index === index)[0];\n    tooltip.style('left', `${x + left}px`).style('top', `${y + top}px`);\n  }\n};\n\nconst updateGraph = (selection) => {\n  selection.selectAll('.link').call(updateLinks);\n  selection.selectAll('.node').call(updateNodes);\n};\n\nexport const GraphLayout = ({ nodes, links, width, height }) => {\n  const ref = useRef();\n  const r = 10;\n\n  const simulation = useMemo(() => {\n    return forceSimulation()\n      .force('links', forceLink())\n      .force('charge', forceManyBody())\n      .force('collide', forceCollide(r))\n      .force('center', forceCenter());\n  }, []);\n\n  useEffect(() => {\n    simulation\n      .force('center')\n      .x(width / 2)\n      .y(height / 2);\n    simulation.on('tick', () => select(ref.current).call(updateGraph));\n    console.log('update center');\n  }, [width, height, simulation]);\n\n  useEffect(() => {\n    const svg = select(ref.current);\n    const linksExtent = extent(links.map((d) => d.coappearances));\n    const scaleLinkWidth = scaleLinear().domain(linksExtent).range([2, 6]);\n    const scaleLinkDistance = scaleLinear()\n      .domain(linksExtent)\n      .range([20, 200]);\n\n    simulation.nodes(nodes);\n    simulation\n      .force('links')\n      .links(links)\n      .distance((d) => scaleLinkDistance(d.coappearances));\n\n    // Links\n    svg\n      .selectAll('.link')\n      .data(links, (d) => d.index)\n      .join((enter) => enter.append('line').call(enterLink, scaleLinkWidth))\n      .call(updateLinks);\n\n    // Nodes\n    const clipPositions = (x, y) => [\n      clamp(x, 0, +svg.attr('width')),\n      clamp(y, 0, +svg.attr('height')),\n    ];\n\n    svg\n      .selectAll('.node')\n      .data(nodes, (d) => d.index)\n      .join((enter) =>\n        enter.append('g').call(enterNode, r, simulation, clipPositions)\n      )\n      .call(updateNodes);\n\n    simulation.alpha(0.5).restart();\n    console.log('update data');\n  }, [simulation, nodes, links]);\n\n  return (\n    <div className=\"svg-container\">\n      <svg ref={ref} width={width} height={height} />\n    </div>\n  );\n};\n","import React, { useState } from 'react';\nimport { Container, Button } from 'react-bootstrap';\nimport {} from 'd3';\nimport { Footer } from './Footer';\nimport { GraphLayout } from './GraphLayout';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './App.css';\nimport data from './data.json';\n\nconst width = 600,\n  height = 500;\n\nfunction App() {\n  const [nodes, setNodes] = useState(data.nodes);\n  const [links, setLinks] = useState(data.links);\n\n  const addData = () => {\n    setNodes((d) =>\n      d.concat({\n        name: 'added',\n        x: width/2,\n        y: height/2,\n      })\n    );\n  };\n\n  return (\n    <Container className=\"app-container\">\n      <header>\n        <h1 className=\"mt-4 mb-4\">GCN JS</h1>\n      </header>\n\n      <main>\n        <GraphLayout\n          nodes={nodes}\n          links={links}\n          width={width}\n          height={height}\n        />\n        <p>\n          <Button onClick={addData}>Add node</Button>\n        </p>\n      </main>\n\n      <Footer url=\"gcn-js\" />\n    </Container>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}