{"version":3,"sources":["Footer.js","GraphLayout.js","App.js","index.js"],"names":["Footer","url","mail","style","width","className","color","paddingLeft","marginBottom","fontSize","href","target","Nav","Item","Link","clamp","value","min","max","enterLink","selection","scale","attr","d","coappearances","enterNode","r","simulation","clipPositions","append","call","drag","on","dragStart","dragOn","dragEnd","event","active","alphaTarget","restart","fx","x","fy","y","updateLinks","source","updateNodes","updateGraph","selectAll","GraphLayout","nodes","links","height","ref","useRef","useMemo","forceSimulation","force","forceLink","forceManyBody","forceCollide","forceCenter","useEffect","select","current","console","log","svg","linksExtent","extent","map","scaleLinkWidth","scaleLinear","domain","range","scaleLinkDistance","distance","data","index","join","enter","alpha","App","useState","setNodes","Container","Button","onClick","concat","name","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.a9f759c3.chunk.js","sourcesContent":["import React from 'react';\nimport { Nav } from 'react-bootstrap';\n\nexport const Footer = ({ url }) => {\n  const mail = 'renato.hermoza@pucp.edu.pe';\n  const social = 'renato145';\n\n  return (\n    <footer style={{ width: '100%' }} className=\"mt-5\">\n      <p style={{ color: '#6c757d', paddingLeft: '1rem', marginBottom: '0rem', fontSize: '0.9rem' }}>\n        Made by: Renato Hermoza, check the{' '}\n        <a href={`https://github.com/renato145/${url}`} target=\"_black\">\n          source code\n        </a>\n        .\n      </p>\n      <hr className=\"mt-2\" />\n      <Nav className=\"justify-content-center\">\n        <Nav.Item>\n          <Nav.Link href={`mailto:${mail}`}>{mail}</Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link href={`https://twitter.com/${social}`} target=\"_black\">\n            Twitter\n          </Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link href={`https://github.com/${social}`} target=\"_black\">\n            GitHub\n          </Nav.Link>\n        </Nav.Item>\n        <Nav.Item>\n          <Nav.Link href={`https://${social}.github.io`} target=\"_black\">\n            Blog\n          </Nav.Link>\n        </Nav.Item>\n      </Nav>\n    </footer>\n  );\n};\n","import React, { useRef, useEffect, useMemo } from 'react';\nimport {\n  forceSimulation,\n  forceLink,\n  forceManyBody,\n  forceCenter,\n  select,\n  drag,\n  event,\n  scaleLinear,\n  extent,\n  forceCollide,\n} from 'd3';\nimport './GraphLayout.css';\n\nexport const clamp = (value, min, max) =>\n  value >= max ? max : value <= min ? min : value;\n\nconst enterLink = (selection, scale) => {\n  selection\n    .attr('class', 'link')\n    .attr('stroke-width', (d) => scale(d.coappearances));\n};\n\nconst enterNode = (selection, r, simulation, clipPositions) => {\n  selection.append('circle').attr('r', r);\n\n  selection.attr('class', 'node').call(\n    drag()\n      .on('start', (d) => dragStart(d, simulation))\n      .on('drag', (d) => dragOn(d, clipPositions))\n      .on('end', (d) => dragEnd(d, simulation))\n  );\n};\n\nconst dragStart = (d, simulation) => {\n  if (!event.active) simulation.alphaTarget(0.3).restart();\n  d.fx = d.x;\n  d.fy = d.y;\n};\n\nconst dragOn = (d, clipPositions) => {\n  const [x, y] = clipPositions(event.x, event.y);\n  d.fx = x;\n  d.fy = y;\n};\n\nconst dragEnd = (d, simulation) => {\n  if (!event.active) simulation.alphaTarget(0);\n  d.fx = null;\n  d.fy = null;\n};\n\nconst updateLinks = (selection) => {\n  selection\n    .attr('x1', (d) => d.source.x)\n    .attr('y1', (d) => d.source.y)\n    .attr('x2', (d) => d.target.x)\n    .attr('y2', (d) => d.target.y);\n};\n\nconst updateNodes = (selection) => {\n  selection.attr('transform', (d) => `translate(${d.x}, ${d.y})`);\n};\n\nconst updateGraph = (selection) => {\n  selection.selectAll('.link').call(updateLinks);\n  selection.selectAll('.node').call(updateNodes);\n};\n\nexport const GraphLayout = ({ nodes, links, width, height }) => {\n  const ref = useRef();\n  const r = 10;\n\n  const simulation = useMemo(() => {\n    return forceSimulation()\n      .force('links', forceLink())\n      .force('charge', forceManyBody())\n      .force('collide', forceCollide(r))\n      .force('center', forceCenter());\n  }, []);\n\n  useEffect(() => {\n    simulation\n      .force('center')\n      .x(width / 2)\n      .y(height / 2);\n    simulation.on('tick', () => select(ref.current).call(updateGraph));\n    console.log('update center');\n  }, [width, height, simulation]);\n\n  useEffect(() => {\n    const svg = select(ref.current);\n    const linksExtent = extent(links.map((d) => d.coappearances));\n    const scaleLinkWidth = scaleLinear().domain(linksExtent).range([2, 6]);\n    const scaleLinkDistance = scaleLinear()\n      .domain(linksExtent)\n      .range([20, 200]);\n\n    simulation.nodes(nodes);\n    simulation\n      .force('links')\n      .links(links)\n      .distance((d) => scaleLinkDistance(d.coappearances));\n\n    svg\n      .selectAll('.link')\n      .data(links, (d) => d.index)\n      .join((enter) => enter.append('line').call(enterLink, scaleLinkWidth))\n      .call(updateLinks);\n\n    const clipPositions = (x, y) => [\n      clamp(x, 0, +svg.attr('width')),\n      clamp(y, 0, +svg.attr('height')),\n    ];\n\n    svg\n      .selectAll('.node')\n      .data(nodes, (d) => d.index)\n      .join((enter) =>\n        enter.append('g').call(enterNode, r, simulation, clipPositions)\n      )\n      .call(updateNodes);\n\n    simulation.alpha(0.5).restart();\n    console.log('update data');\n  }, [simulation, nodes, links]);\n\n  return (\n    <svg ref={ref} width={width} height={height} className=\"svg-container\" />\n  );\n};\n","import React, { useState } from 'react';\nimport { Container, Button } from 'react-bootstrap';\nimport {} from 'd3';\nimport { Footer } from './Footer';\nimport { GraphLayout } from './GraphLayout';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport './App.css';\nimport data from './data.json';\n\nconst width = 600,\n  height = 500;\n\nfunction App() {\n  const [nodes, setNodes] = useState(data.nodes);\n  const [links, setLinks] = useState(data.links);\n\n  const addData = () => {\n    setNodes((d) =>\n      d.concat({\n        name: 'added',\n        x: width/2,\n        y: height/2,\n      })\n    );\n  };\n\n  return (\n    <Container className=\"app-container\">\n      <header>\n        <h1 className=\"mt-4 mb-4\">GCN JS</h1>\n      </header>\n\n      <main>\n        <GraphLayout\n          nodes={nodes}\n          links={links}\n          width={width}\n          height={height}\n        />\n        <p>\n        <Button onClick={addData}>Add node</Button>\n        </p>\n      </main>\n\n      <Footer url=\"gcn-js\" />\n    </Container>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}